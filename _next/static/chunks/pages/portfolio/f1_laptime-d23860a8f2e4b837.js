(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{7324:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolio/f1_laptime",function(){return r(5385)}])},5385:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});var n=r(5893),i=r(7948),a=r(605),o=r(6886),c=r(5861),s=r(7294),l=r(2754);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f,x,p,m=function(e){(0,l.gyn)("https://gist.githubusercontent.com/ajie31/1eb7b91b8e16a072bcda1454e954dab1/raw/F1%2520lap%2520time%25202022.csv",(function(e){return e.raceId=+e.raceId,e.driverId=+e.driverId,e.lap=+e.lap,e.position=+e.position,e.milliseconds=+e.milliseconds,e})).then((function(t){e(t)}))},h=function(e){var t=new Map;(0,l.gyn)("https://gist.githubusercontent.com/ajie31/1eb7b91b8e16a072bcda1454e954dab1/raw/DriverId.csv",(function(e){return e.number=+e.number,e.driverId=+e.driverId,e})).then((function(r){r.map((function(e){return t.set(e.driverId,e)})),e(t)}))},g=function(e){(0,l.gyn)("https://gist.githubusercontent.com/ajie31/1eb7b91b8e16a072bcda1454e954dab1/raw/raceAndCircuit.csv",(function(e){return e.raceId=+e.raceId,e.year=+e.year,e.round=+e.round,e.circuitId=+e.circuitId,e})).then((function(t){var r=t.filter((function(e){return 2022===e.year}));e(r)}))},v=function(e){(0,l.gyn)("https://gist.githubusercontent.com/ajie31/1eb7b91b8e16a072bcda1454e954dab1/raw/pitStopData.csv",(function(e){return e.raceId=+e.raceId,e.driverId=+e.driverId,e.stop=+e.stop,e.lap=+e.lap,e.duration=+e.duration,e.milliseconds=+e.milliseconds,e})).then((function(t){e(t)}))},y=function(e,t){return Array.from(e,(function(e){var r=u(e,2),n=r[0],i=r[1];return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({},t.get(n),{points:i.points,standing:i.position})})).sort((function(e,t){return t.points-e.points}))},j=function(e){var t=new Map;(0,l.gyn)("https://gist.githubusercontent.com/ajie31/1eb7b91b8e16a072bcda1454e954dab1/raw/standing.csv",(function(e){return e.number=+e.number,e.driverId=+e.driverId,e.position=+e.position,e.raceId=+e.raceId,e.points=+e.points,e})).then((function(r){r.filter((function(e){return e.raceId===r[r.length-1].raceId})).map((function(e){return t.set(e.driverId,e)})),e(t)}))},S=r(4054),b=r(3841),A=r(8566),k=function(e){var t=e.handleSelectRace,r=e.circuit,i=e.selectedRace,a=e.lastRace;return(0,n.jsx)("div",{style:{minWidth:300},children:(0,n.jsxs)(S.Z,{fullWidth:!0,children:[(0,n.jsx)(b.Z,{variant:"standard",htmlFor:"uncontrolled-native",children:"Grand Prix"}),(0,n.jsx)(A.Z,{defaultValue:i,inputProps:{name:"Select Race",id:"Race-Menu"},onChange:t,children:r.map((function(e){return e.raceId<=a?(0,n.jsx)("option",{value:e.raceId,children:e.name},"GP-".concat(e.raceId)):(0,n.jsx)("option",{value:e.raceId,disabled:!0,children:e.name},"GP-".concat(e.raceId))}))})]})})},D=function(e){var t=e.Grid,r=e.lastRace,i=e.selectedRace,a=e.handleSelectRace,o=e.circuit;return(0,n.jsxs)(t,{xs:12,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},item:!0,children:[(0,n.jsx)("h3",{className:"title",children:"Pencapaian Waktu Pada setiap Pembalap dalam Kompetisi F1"}),(0,n.jsx)(k,{handleSelectRace:a,circuit:o,selectedRace:i,lastRace:r}),(0,n.jsx)("p",{className:"description",style:{textAlign:"center"},children:"Pencapaian waktu akan diperlihatkan pada sebuah data visual sesuai dengan sirkuit balap yang dipilih"})]})},T=function(e){var t=e.id,r=e.code,i=e.surname;return(0,n.jsxs)("g",{className:"x-axis-code",children:[(0,n.jsx)("rect",{x:-20,y:-18,width:40,height:25,stroke:"#F5F3F2",strokeWidth:2,fill:"#635F5D",rx:"6"}),(0,n.jsx)("text",{y:0,x:0,textAnchor:"middle",fill:"#F5F3F2",fontSize:".9rem",children:r}),(0,n.jsx)("rect",{x:-30,y:-14,width:60,height:20,opacity:0,"data-id":t+"",children:(0,n.jsx)("title",{children:i})})]})},I=function(e){var t=e.markHeight,r=e.top;return(0,n.jsx)("line",{x1:0,y1:r,x2:0,y2:t,stroke:"#C1BAA9",strokeWidth:4.5,strokeLinecap:"round"})},P=function(e){var t=e.markHeight,r=e.top,i=e.xAxisCode,a=e.xAxisSurname,o=e.xAxisId,c=e.xAxisRef,s=e.allData;return(0,n.jsx)("g",{className:"x-axis-group",overflow:"auto",ref:c,children:s.map((function(e,c){return(0,n.jsxs)("g",{className:"x-axis-driver",children:[(0,n.jsx)(I,{markHeight:t,top:r}),(0,n.jsx)(T,{id:o(e),code:i(e),surname:a(e)})]},"driver"+c)}))})},w=function(e){var t=e.tick,r=e.left;return(0,n.jsxs)("g",{className:"y-axis-tick",children:[(0,n.jsx)("line",{x1:r,x2:80,stroke:"#C1BAA9",strokeWidth:2.7}),(0,n.jsx)("text",{x:r,dx:r+23,dy:"-.40em",fill:"#978F80",fontSize:"1rem",style:{textAnchor:"end",fontSize:".8rem"},children:t})]})},F=function(e){var t=e.left,r=e.markWidth;return(0,n.jsx)("line",{x1:t,x2:r,stroke:"#C1BAA9",strokeDasharray:3.2,strokeWidth:2.1})},R=function(e){var t=e.yAxisScale,r=e.left,i=e.markWidth;return(0,n.jsx)("g",{className:"lines-axis-group",overflow:"auto",children:t.ticks(10).map((function(e,a){return(0,n.jsxs)("g",{className:"x-axis-driver",transform:"translate(".concat(0,",").concat(t(e),")"),children:[(0,n.jsx)(F,{markWidth:i,left:r}),(0,n.jsx)(w,{left:r,tick:C(e)})]},"yAxisTick"+a)}))})},C=function(e){var t=parseInt(e%1e3/100),r=Math.floor(e/1e3%60),n=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24);return i=i<10?"0"+i:i,(n=n<10?"0"+n:n)+":"+(r=r<10?"0"+r:r)+"."+t},W=function(e){var t=e.xAxisScale,r=e.markHeight,i=e.top,a=e.xAxisCode,o=e.xAxisSurname,c=e.xAxisId,s=e.yAxisScale,l=e.left,d=e.markWidth,u=e.isAddition,f=e.difference,x=e.xAxisRef,p=e.allData,m=e.initTransform;e.handleSelectDriverToShow;return(0,n.jsxs)("g",{className:"axis-g",children:[(0,n.jsx)(R,{left:l,yAxisScale:s,markWidth:d}),(0,n.jsx)(P,{markHeight:r,top:i,xAxisCode:a,xAxisId:c,xAxisSurname:o,xAxisScale:t,isAddition:u,difference:f,xAxisRef:x,allData:p,initTransform:m})]})},Z=function(e){e.xAxisScale;var t,r,i,a=e.yAxisScale,o=e.xAxisCode,c=e.xAxisId,s=e.yAxisValue,l=e.lapValue,d=e.allData,u=e.dataLapTime,f=e.pitStopData,x=e.maxLap,p=e.markProperties,m=e.markRef,h=function(e){var n=e.position!==t&&c(e)===i;return n&&(r=t),t=e.position,i=c(e),n},g=function(e){return x===l(e)},v=function(e,t){return e.length<x&&t===e.length-1};return(0,n.jsx)("g",{className:"mark-g",ref:m,children:d.map((function(e,t){return(0,n.jsx)("g",{id:"mark-".concat(o(e)),children:u.filter((function(t){return c(t)===c(e)})).map((function(t,i,o){return(0,n.jsx)(z,{isBoxBox:(l=t.raceId,d=c(e),u=t.lap,f.filter((function(e){return e.raceId===l&&e.driverId===d&&e.lap===u})).length>0),isRetire:v(o,i),isFinalPost:g,result:t,yAxisScale:a,yAxisValue:s,markProperties:p,isTakenOver:h(t),oldPositionText:r},"circle-"+i);var l,d,u}))},"mark-"+t)}))})},z=function(e){var t=e.isBoxBox,r=e.isRetire,i=e.isFinalPost,a=e.isTakenOver,o=e.result,c=e.yAxisScale,s=e.yAxisValue,l=e.markProperties,d=e.oldPositionText,u=i(o);return(0,n.jsxs)("g",{className:"circle-mark-g",transform:"translate(0,".concat(c(s(o)),")"),children:[(0,n.jsxs)("circle",{cx:0,cy:0,r:l.lapTime.rad,fill:l.lapTime.color,stroke:r?l.retire.color:t?l.pitStop.color:u?"#F5F3F2":a?l.positionChange.color:"none",strokeWidth:2,children:[(0,n.jsx)("title",{children:"Post: ".concat(o.position,", Lap: ").concat(o.lap,", ").concat(o.time)})," "]}),t||r||a||u?(0,n.jsxs)("g",{className:"special-mark",transform:"translate(".concat(2*l.retire.rad,",0)"),children:[(0,n.jsx)("path",{transform:"rotate(90) translate(-30,-25)",stroke:"#F5F3F2",strokeWidth:2,d:"M 30.876 12.687 Z Z Z M 15 21 C 15 12 21 6 30 6 C 38.913 6 45 12 45 21 S 30 42 30 42 S 15 30 15 21 Z",fill:r?l.retire.color:t?l.pitStop.color:u?l.lapTime.color:a?l.positionChange.color:null,children:(0,n.jsx)("title",{children:r?"retire, Lap: ".concat(o.lap+1):t?"Pit Stop, Lap: ".concat(o.lap,",Time: ").concat(o.time):u?"Finish Position : ".concat(o.position," Time : ").concat(o.time):a?"".concat(o.position<d?"Take Over":"Taken Over"," : from ").concat(d," to ").concat(o.position,", Lap: ").concat(o.lap,", ").concat(o.time):null})}),(0,n.jsx)("text",{x:4,y:u?4:5,textAnchor:"middle",fontSize:u?12:16,fontWeight:700,fill:"#F5F3F2",cursor:"default",pointerEvents:"none",children:r?"!":t?"P":u?"#".concat(o.position):a?"<>":null})]}):null]})},N=function(e){var t=e.top,r=e.right,i=e.markProperties,a=function(e){return e>0?2.8:i.pitStop.rad/2};return(0,n.jsxs)("g",{transform:"translate(".concat(r-10,",").concat(t,")"),className:"legendG",children:[(0,n.jsx)("rect",{x:0,y:0,width:160,height:184,fill:"white",stroke:"#635F5D",strokeWidth:2,rx:"6"}),(0,n.jsx)("g",{className:"markLegends",transform:"translate(".concat(10+i.pitStop.rad,",").concat(22,")"),children:Object.keys(i).map((function(e,t){return(0,n.jsxs)("g",{className:"legend",transform:"translate(0,".concat(i[e].rad*t*a(t),")"),children:[(0,n.jsx)("circle",{cx:0,cy:0,r:i[e].rad,fill:i[e].color}),(0,n.jsx)("text",{x:0,y:0,dx:i.pitStop.rad+10,dy:".37em",fill:"#635F5D",children:i[e].name})]},"legend".concat(t))}))})]})},M=22,L=22,B={top:22+M,bottom:2+2,right:122+12,left:22+L},_={lapTime:{rad:4.8,color:"#688BAB",name:"Lap Time"},positionChange:{rad:12,color:"#E6842A",name:"Position"},finishTime:{rad:12,color:"#688BAB",name:"Finish Lap"},pitStop:{rad:12,color:"#A0B700",name:"Pit Stop"},retire:{rad:12,color:"#E25A42",name:"Retire"}},O=function(e){var t=e.dataLapTime,r=e.pitStopData,i=(e.dataDriver,e.driverToShow,e.driverToRender),a=e.selectedDrivers,o=e.xAxisRef,c=e.markRef,d=(e.handleSelectDriverToShow,900-B.left-B.right),u=600-B.top-B.bottom,m=function(e){return e.code},h=function(e){return e.driverId},g=function(e){return e.milliseconds},v=function(e){return e.lap},y=a.isAddition,j=a.difference,S=!y&&x?x:i,b=(0,l.q2y)().domain(i.map(m)).range([B.left,d]).padding(1),A=(0,l.p2C)().domain((0,l.Wem)(t,g)).range([B.top,u]);p&&p!==t[0].raceId&&(f=b,x=i);var k=function(e){return j!==h(e)||y?"translate(".concat(b(m(e)),",").concat(M,")"):"translate(900,".concat(M,")")},D=function(e){return y&&h(e)===j?"translate(-100,".concat(M,")"):"translate(".concat(f(m(e)),",").concat(M,")")},T=function(e){return y&&h(e)===j?"translate(-100,".concat(0,")"):"translate(".concat(f(m(e)),",",0,")")},I=function(e){return j!==h(e)||y?"translate(".concat(b(m(e)),",",0,")"):"translate(900,".concat(0,")")},P=(0,l.Fp7)(t,v);return(0,s.useEffect)((function(){var e=(0,l.td_)(o.current.children).data(S).join("g").attr("transform",(function(e){return D(e)})),r=(0,l.td_)(c.current.children).data(S).join("g").attr("transform",(function(e){return T(e)}));e.transition().duration(400).attr("transform",(function(e){return k(e)})),r.transition().duration(400).attr("transform",(function(e){return I(e)})),p=t[0].raceId,f=b,x=i}),[i,b,f,x,I,k]),(0,n.jsx)("svg",{viewBox:"0 0 ".concat(900," ").concat(600),preserveAspectRatio:"xMinYMin",overflow:"scroll",children:(0,n.jsxs)("g",{className:"MainGroup",transform:"translate(".concat(L,",").concat(M,")"),children:[(0,n.jsx)(W,{driverToRender:i,markHeight:u-M,top:M,xAxisCode:m,xAxisId:h,xAxisSurname:function(e){return e.surname},xAxisScale:b,left:L,yAxisScale:A,markWidth:d,xAxisRef:o,allData:S,initTransform:D}),(0,n.jsx)(Z,{xAxisScale:b,yAxisScale:A,xAxisCode:m,xAxisId:h,yAxisValue:g,lapValue:v,isAddition:a.isAddition,difference:a.difference,driverToRender:i,dataLapTime:t,pitStopData:r,maxLap:P,markProperties:_,initTransform:T,allData:S,markRef:c}),(0,n.jsx)(N,{top:600-B.top-B.bottom-187,right:d,markProperties:_})]})})},E=r(3454),G=r(6420),V=function(e){var t=e.standing,r=e.surname,i=e.forename,a=e.points;return(0,n.jsxs)(o.ZP,{container:!0,children:[(0,n.jsx)(o.ZP,{xs:3,style:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"left",fontSize:"1.25rem",fontWeight:"bold"},item:!0,children:"#".concat(t)}),(0,n.jsxs)(o.ZP,{xs:6,style:{display:"flex",flexDirection:"column",textAlign:"left",justifyContent:"center"},item:!0,children:[(0,n.jsx)("span",{style:{fontSize:".7rem",fontWeight:"light"},children:i}),(0,n.jsx)("span",{style:{fontSize:".86rem",fontWeight:"bold"},children:r})]}),(0,n.jsxs)(o.ZP,{xs:3,style:{display:"flex",flexDirection:"column"},item:!0,children:[(0,n.jsx)("span",{style:{fontSize:".86rem",fontWeight:"light"},children:"".concat(a)}),(0,n.jsx)("span",{style:{fontSize:".7rem",fontWeight:"800",backgroundColor:"#635f5d",color:"white",borderRadius:"3px"},children:" pts"})]})]})},H=function(e){var t=e.recentDriverParticipants,r=e.handleSelectDriver,i=e.selectedDrivers;return(0,n.jsx)(E.Z,{value:i.drivers,onChange:r,"aria-label":"Driver Menu",title:"DriverMenu",children:t.map((function(e,t){return(0,n.jsx)(G.Z,{style:{width:"230px"},value:e.driverId,"aria-label":e.code,children:(0,n.jsx)(V,{standing:e.standing,surname:e.surname,forename:e.forename,points:e.points})},e.code+"driver"+t)}))})},X=function(e){var t=e.dataLapTime,r=e.dataDriver,i=e.pitStopData,a=e.driverToShow,o=e.recentDriverParticipants,c=e.Grid,s=e.selectedDrivers,l=e.handleSelectDriver,d=e.handleSelectDriverToShow,u=e.driverToRender,f=e.xAxisRef,x=e.markRef;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{item:!0,xs:12,style:{width:"85%",padding:0},children:(0,n.jsx)(O,{dataLapTime:t,dataDriver:r,driverToShow:a,driverToRender:u,selectedDrivers:s,pitStopData:i,xAxisRef:f,markRef:x,handleSelectDriverToShow:d})}),(0,n.jsxs)(c,{item:!0,xs:12,style:{maxWidth:"1250px",overflow:"auto",textAlign:"center",padding:0},children:[(0,n.jsx)("h3",{style:{margin:".5rem",color:"#635f5d"},children:"Driver Menu"}),(0,n.jsx)(H,{recentDriverParticipants:o,selectedDrivers:s,handleSelectDriver:l})]})]})},q=r(1596),K=r(1664),Y=function(){var e=(0,s.useState)(null),t=e[0],r=e[1],l=(0,s.useState)(null),d=l[0],u=l[1],f=(0,s.useState)(null),x=f[0],p=f[1],S=(0,s.useState)(null),b=S[0],A=S[1],k=(0,s.useState)({drivers:[],difference:null,isAddition:!1}),T=k[0],I=k[1],P=(0,s.useState)(1075),w=P[0],F=P[1],R=(0,s.useState)(null),C=R[0],W=R[1],Z=(0,s.useState)(null),z=Z[0],N=Z[1],M=(0,s.useRef)(null),L=(0,s.useRef)(null);if((0,s.useEffect)((function(){h(r),m(u),v(W),g(N),j(p)}),[h,m,v,r,u,W,g,N,p,j]),!t||!d||!C||!z||!w||!x)return(0,n.jsx)("pre",{children:"Loading..."});var B=d.filter((function(e){return e.raceId===w})),_=y(x,t),O=d[d.length-1].raceId,E=T.drivers.map((function(e){return t.get(e)}));return(0,n.jsx)(i.Z,{maxWidth:"lg",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(a.Z,{theme:q.l,children:(0,n.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(D,{Grid:o.ZP,handleSelectRace:function(e){F(+e.target.value),I({drivers:[],difference:null,isAddition:!1})},circuit:z,selectedRace:w,lastRace:O}),(0,n.jsx)(X,{dataLapTime:B,dataDriver:t,driverToShow:b,recentDriverParticipants:_,Grid:o.ZP,selectedDrivers:T,handleSelectDriver:function(e,t){var r=T.drivers,n={drivers:t,difference:t.length>r.length?t[t.length-1]:r.filter((function(e){return!t.includes(e)}))[0],isAddition:!e.currentTarget.classList.contains("Mui-selected")};I(n)},handleSelectDriverToShow:function(e){var r=+e.target.dataset.id;A({standing:x.get(r),driver:t.get(r)})},driverToRender:E,pitStopData:C,xAxisRef:M,markRef:L}),(0,n.jsx)(o.ZP,{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",margin:"1rem 0"},xs:12,item:!0,children:(0,n.jsxs)(c.Z,{variant:"captionSource",children:["data source :"," ",(0,n.jsx)(K.default,{href:"http://ergast.com/mrd/",children:(0,n.jsx)("a",{target:"_blank",children:"The Ergast"})})," ","Developer API F1 data provider that update every GP Race."]})})]})})})},J=function(){return(0,n.jsx)(Y,{})}},1596:function(e,t,r){"use strict";r.d(t,{S:function(){return a},l:function(){return o}});var n=r(5799),i=(0,n.Z)({palette:{background:{paper:"#fff"},text:{primary:"#635f5d",secondary:"#8e8883",third:"#C0C0BB"}}}),a=(0,n.Z)({breakpoints:{values:{xs:460,sm:600,md:900,lg:1200,xl:1536}}}),o=(0,n.Z)(i,{typography:{h1:{fontFamily:["Tinos","serif"].join(","),color:i.palette.text.primary,width:"100%",fontSize:"50px",padding:"1rem"},contentTitle:{display:"block",fontFamily:["Tinos","serif"].join(","),color:i.palette.text.primary,fontSize:"27px",marginBottom:"1rem"},tableTitle:{display:"block",fontFamily:["Tinos","serif"].join(","),color:i.palette.text.primary,fontSize:"27px",marginBottom:"1rem",textAlign:"center"},body1:{fontFamily:["Domine","serif"].join(","),color:i.palette.text.secondary,fontSize:"18px"},body2:{fontFamily:["Domine","serif"].join(","),color:i.palette.text.secondary,fontSize:"14px",fontWeight:"lighter"},body3:{fontFamily:["Domine","serif"].join(","),color:i.palette.text.secondary,fontSize:"14px"},subtitle2:{fontFamily:["Domine","serif"].join(","),fontSize:"14px",color:i.palette.text.secondary},subtitle3:{fontFamily:["Domine","serif"].join(","),color:i.palette.text.secondary,fontSize:"10px"},boldSubtitle:{fontFamily:["Domine","serif"].join(","),color:i.palette.text.primary,fontSize:"14px",fontWeight:700},boldCaption:{fontFamily:["Montserrat","sans-serif"].join(","),color:i.palette.text.secondary,fontSize:"12px",fontWeight:700},captionInfo:{fontFamily:["Montserrat","sans-serif"].join(","),color:i.palette.text.third,fontSize:"12px"},captionSource:{fontFamily:["Montserrat","sans-serif"].join(","),color:i.palette.text.third,fontSize:"12px",textAlign:"right"},captionTable:{fontFamily:["Montserrat","sans-serif"].join(","),color:i.palette.text.third,fontSize:"10px",textAlign:"right"}}})}},function(e){e.O(0,[169,581,527,120,774,888,179],(function(){return t=7324,e(e.s=t);var t}));var t=e.O();_N_E=t}]);